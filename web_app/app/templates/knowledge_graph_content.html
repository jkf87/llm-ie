<!-- Knowledge Graph Content Template -->
<div class="knowledge-graph-container">
    <!-- íŒŒì¼ ì—…ë¡œë“œ ì„¹ì…˜ -->
    <div class="upload-section">
        <h3>ğŸ“Š ì§€ì‹ê·¸ë˜í”„ ìƒì„±</h3>
        <div class="file-upload-area">
            <div class="upload-zone" id="kg-upload-zone">
                <div class="upload-icon">ğŸ“</div>
                <p>LLM-IE ì¶”ì¶œ ê²°ê³¼ íŒŒì¼ (.llmie)ì„ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì—…ë¡œë“œí•˜ì„¸ìš”</p>
                <input type="file" id="kg-file-input" accept=".llmie" style="display: none;">
                <button type="button" class="btn btn-primary" id="kg-file-select-btn">
                    íŒŒì¼ ì„ íƒ
                </button>
            </div>
            <div class="file-info" id="kg-file-info" style="display: none;">
                <p><strong>ì„ íƒëœ íŒŒì¼:</strong> <span id="kg-file-name"></span></p>
                <p><strong>íŒŒì¼ í¬ê¸°:</strong> <span id="kg-file-size"></span></p>
            </div>
        </div>
    </div>

    <!-- ì„¤ì • ì„¹ì…˜ -->
    <div class="settings-section">
        <h4>ğŸ”§ ì§€ì‹ê·¸ë˜í”„ ì„¤ì •</h4>
        <div class="settings-grid">
            <div class="setting-item">
                <label for="kg-enable-llm-inference">
                    <input type="checkbox" id="kg-enable-llm-inference" checked>
                    ê³ ê¸‰ ê´€ê³„ ì¶”ë¡  í™œì„±í™”
                </label>
                <small>Multi-Agent ì‹œìŠ¤í…œì„ ì‚¬ìš©í•˜ì—¬ ë°˜ë³µì ìœ¼ë¡œ ê´€ê³„ë¥¼ ê°œì„ í•©ë‹ˆë‹¤</small>
            </div>
            <div class="setting-item">
                <label for="kg-enable-entity-resolution">
                    <input type="checkbox" id="kg-enable-entity-resolution" checked>
                    ì—”í‹°í‹° í•´ê²° í™œì„±í™”
                </label>
                <small>ì¤‘ë³µëœ ì—”í‹°í‹°ë¥¼ ìë™ìœ¼ë¡œ ë³‘í•©í•©ë‹ˆë‹¤</small>
            </div>
            <div class="setting-item">
                <label for="kg-llm-api-select">LLM API ì„ íƒ:</label>
                <select id="kg-llm-api-select">
                    <option value="gemini_direct">Gemini Direct API (ì¶”ì²œ)</option>
                    <option value="openai_compatible">OpenAI Compatible</option>
                    <option value="ollama">Ollama</option>
                </select>
            </div>
            <div class="setting-item" id="kg-gemini-settings">
                <label for="kg-gemini-api-key">Gemini API Key:</label>
                <input type="password" id="kg-gemini-api-key" placeholder="AIzaSy..." class="form-control">
            </div>
        </div>
    </div>

    <!-- ê´€ê³„ ì¶”ì¶œ ì»¨í…ìŠ¤íŠ¸ ì„¹ì…˜ -->
    <div class="relation-context-section">
        <h4>ğŸ¯ ê´€ê³„ ì¶”ì¶œ ì»¨í…ìŠ¤íŠ¸</h4>
        <div class="context-container">
            <div class="context-header">
                <p class="context-description">
                    ì—”í‹°í‹° ê°„ ê´€ê³„ë¥¼ ë” ì •í™•í•˜ê²Œ ì¶”ì¶œí•˜ê¸° ìœ„í•´ ë¬¸ì„œì˜ ë§¥ë½ê³¼ ë„ë©”ì¸ ì •ë³´ë¥¼ ì œê³µí•´ì£¼ì„¸ìš”.
                </p>
            </div>
            
            <div class="context-grid">
                <div class="context-row">
                    <div class="context-item">
                        <label for="kg-domain-select">ğŸ“š ë¬¸ì„œ ë„ë©”ì¸:</label>
                        <select id="kg-domain-select" class="form-control">
                            <option value="research_paper">ğŸ“š ì—°êµ¬ ë…¼ë¬¸</option>
                            <option value="technical_document">ğŸ”§ ê¸°ìˆ  ë¬¸ì„œ</option>
                            <option value="business_document">ğŸ’¼ ë¹„ì¦ˆë‹ˆìŠ¤ ë¬¸ì„œ</option>
                            <option value="legal_document">âš–ï¸ ë²•ë¥  ë¬¸ì„œ</option>
                            <option value="medical_document">ğŸ¥ ì˜ë£Œ ë¬¸ì„œ</option>
                            <option value="general">ğŸ“„ ì¼ë°˜ ë¬¸ì„œ</option>
                        </select>
                        <small class="form-text">ë„ë©”ì¸ë³„ë¡œ íŠ¹í™”ëœ ê´€ê³„ íŒ¨í„´ì„ ì ìš©í•©ë‹ˆë‹¤</small>
                    </div>
                    
                    <div class="context-item">
                        <label for="kg-relation-template">ğŸ”— ê´€ê³„ ì¶”ì¶œ í…œí”Œë¦¿:</label>
                        <select id="kg-relation-template" class="form-control">
                            <option value="comprehensive">í¬ê´„ì  ì¶”ì¶œ (ëª¨ë“  ê´€ê³„ ìœ í˜•)</option>
                            <option value="hierarchical">ê³„ì¸µì  ê´€ê³„ ì¤‘ì‹¬</option>
                            <option value="causal">ì¸ê³¼ê´€ê³„ ì¤‘ì‹¬</option>
                            <option value="comparative">ë¹„êµê´€ê³„ ì¤‘ì‹¬</option>
                            <option value="temporal">ì‹œê°„ì  ê´€ê³„ ì¤‘ì‹¬</option>
                            <option value="custom">ì‚¬ìš©ì ì •ì˜</option>
                        </select>
                        <small class="form-text">ì¶”ì¶œí•  ê´€ê³„ ìœ í˜•ì„ ì„ íƒí•©ë‹ˆë‹¤</small>
                    </div>
                </div>
                
                <div class="context-item full-width">
                    <label for="kg-relation-context">ğŸ’¬ ê´€ê³„ ì¶”ì¶œ ì»¨í…ìŠ¤íŠ¸:</label>
                    <textarea id="kg-relation-context" class="form-control" rows="4" 
                        placeholder="ë¬¸ì„œì˜ ì£¼ì œì™€ ë§¥ë½ì„ ì„¤ëª…í•´ì£¼ì„¸ìš”. ì˜ˆ:
'ì´ ë…¼ë¬¸ì€ ì—¬ëŸ¬ LLM ëª¨ë¸(Llama2, GPT4, Mixtral)ì˜ ì„±ê²©ì„ IPIP-NEO-120 ì„¤ë¬¸ì§€ë¡œ ë¶„ì„í•œ ì—°êµ¬ì…ë‹ˆë‹¤. ëª¨ë¸ë“¤ ê°„ì˜ ë¹„êµê´€ê³„ì™€ í‰ê°€ ë„êµ¬ì™€ì˜ ì‚¬ìš©ê´€ê³„ì— ì¤‘ì ì„ ë‘¡ë‹ˆë‹¤.'"></textarea>
                    <small class="form-text">ì´ ë§¥ë½ ì •ë³´ëŠ” ê´€ê³„ ì¶”ë¡  ì‹œ LLMì—ê²Œ ì „ë‹¬ë˜ì–´ ë” ì •í™•í•œ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤</small>
                </div>
                
                <div class="context-item full-width">
                    <label for="kg-relation-guidelines">ğŸ“ ê´€ê³„ ì¶”ì¶œ ê°€ì´ë“œë¼ì¸:</label>
                    <textarea id="kg-relation-guidelines" class="form-control" rows="3"
                        placeholder="íŠ¹ë³„í•œ ê´€ê³„ ì¶”ì¶œ ê·œì¹™ì´ë‚˜ ì„ í˜¸ì‚¬í•­ì„ ì…ë ¥í•˜ì„¸ìš”. ì˜ˆ:
- MODEL ì—”í‹°í‹°ë“¤ ê°„ì—ëŠ” 'COMPARES_WITH' ê´€ê³„ë¥¼ ìš°ì„  ì°¾ì•„ì£¼ì„¸ìš”
- TECHNOLOGYì™€ PARAMETER ì—”í‹°í‹° ê°„ì—ëŠ” 'USES' ê´€ê³„ë¥¼ ì‹ë³„í•´ì£¼ì„¸ìš”
- ì‹œê°„ì  ìˆœì„œê°€ ìˆëŠ” ê²½ìš° 'PRECEDES' ê´€ê³„ë¥¼ í‘œì‹œí•´ì£¼ì„¸ìš”"></textarea>
                    <small class="form-text">ì„ íƒì‚¬í•­: íŠ¹ì • ê´€ê³„ íŒ¨í„´ì´ë‚˜ ìš°ì„ ìˆœìœ„ ì§€ì¹¨</small>
                </div>
                
                <div class="context-row">
                    <div class="context-item">
                        <label for="kg-max-relations">ğŸ”¢ ìµœëŒ€ ê´€ê³„ ìˆ˜:</label>
                        <input type="number" id="kg-max-relations" value="20" min="5" max="100" class="form-control">
                        <small class="form-text">ìƒì„±í•  ìµœëŒ€ ê´€ê³„ ê°œìˆ˜</small>
                    </div>
                    
                    <div class="context-item">
                        <label for="kg-relation-confidence">ğŸ“Š ìµœì†Œ ì‹ ë¢°ë„:</label>
                        <input type="range" id="kg-relation-confidence" min="0.1" max="1.0" step="0.1" value="0.7" class="form-range">
                        <div class="confidence-display">
                            <small>ë‚®ìŒ (0.1)</small>
                            <span id="confidence-value">0.7</span>
                            <small>ë†’ìŒ (1.0)</small>
                        </div>
                        <small class="form-text">ì´ ê°’ë³´ë‹¤ ë‚®ì€ ì‹ ë¢°ë„ì˜ ê´€ê³„ëŠ” ì œì™¸</small>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ê´€ê³„ ì¶”ë¡  ì»¨í…ìŠ¤íŠ¸ ì„¹ì…˜ -->
    <div class="context-section" id="kg-context-section" style="display: none;">
        <h4>ğŸ¯ ê´€ê³„ ì¶”ë¡  ì»¨í…ìŠ¤íŠ¸</h4>
        <div class="context-grid">
            <div class="context-item">
                <label for="kg-domain-select">ë¬¸ì„œ ë„ë©”ì¸:</label>
                <select id="kg-domain-select" class="form-control">
                    <option value="research_paper">ğŸ“š ì—°êµ¬ ë…¼ë¬¸</option>
                    <option value="technical_document">ğŸ”§ ê¸°ìˆ  ë¬¸ì„œ</option>
                    <option value="business_document">ğŸ’¼ ë¹„ì¦ˆë‹ˆìŠ¤ ë¬¸ì„œ</option>
                    <option value="general">ğŸ“„ ì¼ë°˜ ë¬¸ì„œ</option>
                </select>
                <small>ë„ë©”ì¸ì— ë”°ë¼ ì ì ˆí•œ ê´€ê³„ ìœ í˜•ì´ ì¶”ì²œë©ë‹ˆë‹¤</small>
            </div>
            <div class="context-item full-width">
                <label for="kg-user-context">ì‚¬ìš©ì ì»¨í…ìŠ¤íŠ¸:</label>
                <textarea id="kg-user-context" class="form-control" rows="3" 
                    placeholder="ë¬¸ì„œì˜ ì£¼ì œ, ëª©ì , íŠ¹ë³„í•œ ë§¥ë½ ë“±ì„ ì„¤ëª…í•´ì£¼ì„¸ìš”. ì˜ˆ: 'ì´ ë…¼ë¬¸ì€ LLM ì„±ê²© ë¶„ì„ì— ê´€í•œ ì—°êµ¬ë¡œ, ì—¬ëŸ¬ ëª¨ë¸ë“¤ì„ IPIP-NEO-120 ì„¤ë¬¸ì§€ë¡œ ë¹„êµ í‰ê°€í•©ë‹ˆë‹¤.'"></textarea>
                <small>ì´ ì •ë³´ëŠ” ë” ì •í™•í•œ ê´€ê³„ ì¶”ë¡ ì„ ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤</small>
            </div>
            <div class="context-item full-width">
                <label for="kg-additional-guidelines">ì¶”ê°€ ê°€ì´ë“œë¼ì¸:</label>
                <textarea id="kg-additional-guidelines" class="form-control" rows="2"
                    placeholder="íŠ¹ì • ê´€ê³„ ìœ í˜•ì„ ê°•ì¡°í•˜ê±°ë‚˜ ì œì™¸í•  ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”. ì˜ˆ: 'MODEL ì—”í‹°í‹°ë“¤ ê°„ì—ëŠ” COMPARES_WITH ê´€ê³„ë¥¼ ìš°ì„  ì°¾ì•„ì£¼ì„¸ìš”.'"></textarea>
                <small>ì„ íƒì‚¬í•­: íŠ¹ë³„í•œ ê´€ê³„ ì¶”ë¡  ê·œì¹™ì´ë‚˜ ì„ í˜¸ë„</small>
            </div>
        </div>
    </div>

    <!-- ê´€ê³„ ì¶”ë¡  ì„¤ì • -->
    <div class="inference-settings-section" id="kg-inference-settings" style="display: none;">
        <h4>âš™ï¸ ì¶”ë¡  ë§¤ê°œë³€ìˆ˜</h4>
        <div class="inference-grid">
            <div class="inference-item">
                <label for="kg-max-relations">ìµœëŒ€ ê´€ê³„ ìˆ˜:</label>
                <input type="number" id="kg-max-relations" value="20" min="5" max="50" class="form-control">
                <small>ì¶”ë¡ í•  ìµœëŒ€ ê´€ê³„ ê°œìˆ˜</small>
            </div>
            <div class="inference-item">
                <label for="kg-target-score">ëª©í‘œ í’ˆì§ˆ ì ìˆ˜:</label>
                <input type="number" id="kg-target-score" value="75" min="50" max="95" step="5" class="form-control">
                <small>ì´ ì ìˆ˜ì— ë„ë‹¬í•˜ë©´ ë°˜ë³µ ì¢…ë£Œ (100ì  ë§Œì )</small>
            </div>
            <div class="inference-item">
                <label for="kg-max-iterations">ìµœëŒ€ ë°˜ë³µ íšŸìˆ˜:</label>
                <input type="number" id="kg-max-iterations" value="3" min="1" max="5" class="form-control">
                <small>ê´€ê³„ í’ˆì§ˆ ê°œì„ ì„ ìœ„í•œ ìµœëŒ€ ì‹œë„ íšŸìˆ˜</small>
            </div>
            <div class="inference-item">
                <label for="kg-enable-relation-review">
                    <input type="checkbox" id="kg-enable-relation-review">
                    ê´€ê³„ ê²€í†  ë‹¨ê³„ í¬í•¨
                </label>
                <small>ìƒì„±ëœ ê´€ê³„ë¥¼ ì‚¬ìš©ìê°€ ê²€í† í•˜ê³  ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</small>
            </div>
        </div>
    </div>

    <!-- ì•¡ì…˜ ë²„íŠ¼ -->
    <div class="action-buttons">
        <button type="button" id="generate-kg-btn" class="btn btn-success" disabled>
            ğŸš€ ì§€ì‹ê·¸ë˜í”„ ìƒì„±
        </button>
        <button type="button" id="validate-kg-btn" class="btn btn-info" disabled>
            ğŸ” ì§€ì‹ê·¸ë˜í”„ ê²€ì¦
        </button>
        <button type="button" id="clear-kg-btn" class="btn btn-secondary">
            ğŸ—‘ï¸ ê²°ê³¼ ì§€ìš°ê¸°
        </button>
    </div>

    <!-- ì§„í–‰ìƒí™© í‘œì‹œ -->
    <div class="progress-section" id="kg-progress" style="display: none;">
        <h4>ì§„í–‰ ìƒí™©</h4>
        <div class="progress-bar">
            <div class="progress-fill" id="kg-progress-fill"></div>
        </div>
        <div class="progress-text" id="kg-progress-text">ì¤€ë¹„ ì¤‘...</div>
    </div>

    <!-- ê²°ê³¼ í‘œì‹œ ì„¹ì…˜ -->
    <div class="results-section" id="kg-results" style="display: none;">
        <h3>ğŸ“ˆ ì§€ì‹ê·¸ë˜í”„ ê²°ê³¼</h3>
        
        <!-- í†µê³„ ì •ë³´ -->
        <div class="stats-panel" id="kg-stats">
            <h4>ğŸ“Š í†µê³„</h4>
            <div class="stats-grid">
                <div class="stat-item">
                    <span class="stat-label">ì´ íŠ¸ë¦¬í”Œ:</span>
                    <span class="stat-value" id="total-triples">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">ì—”í‹°í‹°:</span>
                    <span class="stat-value" id="total-entities">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">ê´€ê³„:</span>
                    <span class="stat-value" id="total-relations">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">ë¬¸ì„œ:</span>
                    <span class="stat-value" id="total-documents">0</span>
                </div>
            </div>
        </div>

        <!-- ì‹œê°í™” -->
        <div class="visualization-panel">
            <h4>ğŸ•¸ï¸ ì§€ì‹ê·¸ë˜í”„ ì‹œê°í™”</h4>
            <div class="viz-controls">
                <button type="button" class="btn btn-sm btn-outline-primary" id="fit-network">
                    ì „ì²´ ë³´ê¸°
                </button>
                <button type="button" class="btn btn-sm btn-outline-secondary" id="toggle-physics">
                    ë¬¼ë¦¬ íš¨ê³¼ í† ê¸€
                </button>
                <button type="button" class="btn btn-sm btn-outline-success" id="manual-relation-mode-btn">
                    ğŸ”— ìˆ˜ë™ ê´€ê³„ ìƒì„±
                </button>
            </div>
            
            <div id="kg-visualization" class="network-container"></div>
        </div>

        <!-- RDF ì¶œë ¥ -->
        <div class="rdf-panel">
            <h4>ğŸ“„ RDF ì¶œë ¥</h4>
            <div class="rdf-format-tabs">
                <button type="button" class="tab-btn active" data-format="turtle">Turtle</button>
                <button type="button" class="tab-btn" data-format="xml">RDF/XML</button>
                <button type="button" class="tab-btn" data-format="json-ld">JSON-LD</button>
                <button type="button" class="tab-btn" data-format="n3">N3</button>
            </div>
            <div class="rdf-content">
                <pre id="rdf-output" class="rdf-code"></pre>
            </div>
            <div class="rdf-actions">
                <button type="button" class="btn btn-primary" id="copy-rdf-btn">
                    ğŸ“‹ ë³µì‚¬
                </button>
                <button type="button" class="btn btn-success" id="download-rdf-btn">
                    ğŸ’¾ ë‹¤ìš´ë¡œë“œ
                </button>
            </div>
        </div>
    </div>

    <!-- ê²€ì¦ ê²°ê³¼ ì„¹ì…˜ -->
    <div class="validation-section" id="kg-validation-results" style="display: none;">
        <h3>ğŸ” ì§€ì‹ê·¸ë˜í”„ ê²€ì¦ ê²°ê³¼</h3>
        
        <!-- ì „ì²´ ì ìˆ˜ -->
        <div class="validation-score">
            <div class="score-circle">
                <span class="score-value" id="validation-score">0</span>
                <span class="score-label">/100</span>
            </div>
            <div class="score-info">
                <p><strong>ì „ì²´ ê²€ì¦ ì ìˆ˜</strong></p>
                <p id="validation-summary">ê²€ì¦ ì§„í–‰ ì¤‘...</p>
            </div>
        </div>

        <!-- ê²€ì¦ ì„¸ë¶€ì‚¬í•­ -->
        <div class="validation-details">
            <h4>ì„¸ë¶€ ê²€ì¦ ê²°ê³¼</h4>
            <div id="validation-checks"></div>
        </div>

        <!-- LLM ê²€ì¦ ê²°ê³¼ -->
        <div class="llm-validation" id="llm-validation-panel" style="display: none;">
            <h4>ğŸ¤– LLM í’ˆì§ˆ í‰ê°€</h4>
            <div class="llm-scores" id="llm-scores"></div>
            <div class="llm-feedback">
                <div class="feedback-section">
                    <h5>âœ… ê°•ì </h5>
                    <ul id="validation-strengths"></ul>
                </div>
                <div class="feedback-section">
                    <h5>âš ï¸ ì•½ì </h5>
                    <ul id="validation-weaknesses"></ul>
                </div>
                <div class="feedback-section">
                    <h5>ğŸ’¡ ì¶”ì²œì‚¬í•­</h5>
                    <ul id="validation-recommendations"></ul>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ê´€ê³„ í¸ì§‘ ëª¨ë‹¬ í¬í•¨ -->
{% include 'relation_editor_modal.html' %}

<!-- ìŠ¤íƒ€ì¼ ì •ì˜ -->
<style>
.knowledge-graph-container {
    padding: 20px;
    max-width: 1200px;
    margin: 0 auto;
}

.upload-section, .settings-section, .results-section, .validation-section {
    background: #f8f9fa;
    padding: 20px;
    margin: 20px 0;
    border-radius: 8px;
    border: 1px solid #dee2e6;
}

.upload-zone {
    border: 2px dashed #007bff;
    border-radius: 8px;
    padding: 40px 20px;
    text-align: center;
    background: #f8f9ff;
    transition: all 0.3s ease;
}

.upload-zone:hover {
    border-color: #0056b3;
    background: #e6f2ff;
}

.upload-zone.drag-over {
    border-color: #28a745;
    background: #e6ffe6;
}

.upload-icon {
    font-size: 48px;
    margin-bottom: 16px;
}

.settings-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-top: 15px;
}

.setting-item {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.setting-item label {
    font-weight: 500;
}

.setting-item small {
    color: #6c757d;
    font-size: 0.875em;
}

.action-buttons {
    display: flex;
    gap: 12px;
    margin: 20px 0;
}

.progress-section {
    background: #fff;
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #dee2e6;
}

.progress-bar {
    width: 100%;
    height: 24px;
    background: #e9ecef;
    border-radius: 12px;
    overflow: hidden;
    margin: 10px 0;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #007bff, #0056b3);
    width: 0%;
    transition: width 0.3s ease;
}

.progress-text {
    text-align: center;
    font-weight: 500;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 16px;
    margin-top: 15px;
}

.stat-item {
    background: white;
    padding: 16px;
    border-radius: 8px;
    text-align: center;
    border: 1px solid #dee2e6;
}

.stat-label {
    display: block;
    font-size: 0.875em;
    color: #6c757d;
    margin-bottom: 8px;
}

.stat-value {
    display: block;
    font-size: 2em;
    font-weight: bold;
    color: #007bff;
}

.visualization-panel, .rdf-panel {
    background: white;
    padding: 20px;
    margin: 20px 0;
    border-radius: 8px;
    border: 1px solid #dee2e6;
}

.viz-controls {
    margin-bottom: 16px;
}

.network-container {
    width: 100%;
    height: 500px;
    border: 1px solid #dee2e6;
    border-radius: 4px;
    background: #fafafa;
}

.rdf-format-tabs {
    display: flex;
    gap: 2px;
    margin-bottom: 16px;
}

.tab-btn {
    background: #e9ecef;
    border: none;
    padding: 8px 16px;
    cursor: pointer;
    border-radius: 4px 4px 0 0;
    transition: background 0.2s;
}

.tab-btn.active {
    background: #007bff;
    color: white;
}

.tab-btn:hover:not(.active) {
    background: #dee2e6;
}

.rdf-content {
    max-height: 400px;
    overflow: auto;
    background: #f8f9fa;
    border: 1px solid #dee2e6;
    border-radius: 4px;
}

.rdf-code {
    margin: 0;
    padding: 16px;
    font-family: 'Monaco', 'Menlo', 'Consolas', monospace;
    font-size: 0.875em;
    line-height: 1.4;
    background: none;
    border: none;
}

.rdf-actions {
    margin-top: 12px;
    display: flex;
    gap: 8px;
}

.validation-score {
    display: flex;
    align-items: center;
    gap: 20px;
    margin-bottom: 20px;
}

.score-circle {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    width: 120px;
    height: 120px;
    border-radius: 50%;
    background: linear-gradient(135deg, #007bff, #0056b3);
    color: white;
    font-weight: bold;
}

.score-value {
    font-size: 2.5em;
    line-height: 1;
}

.score-label {
    font-size: 1em;
    opacity: 0.8;
}

.score-info {
    flex: 1;
}

.validation-checks {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.validation-check {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px;
    background: white;
    border-radius: 6px;
    border: 1px solid #dee2e6;
}

.validation-check.passed {
    border-color: #28a745;
    background: #f8fff9;
}

.validation-check.failed {
    border-color: #dc3545;
    background: #fff8f8;
}

.check-icon {
    font-size: 1.5em;
}

.check-icon.passed {
    color: #28a745;
}

.check-icon.failed {
    color: #dc3545;
}

.llm-scores {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 16px;
    margin-bottom: 20px;
}

.llm-score-item {
    background: white;
    padding: 16px;
    border-radius: 8px;
    text-align: center;
    border: 1px solid #dee2e6;
}

.feedback-section {
    margin-bottom: 20px;
}

.feedback-section h5 {
    margin-bottom: 10px;
    font-weight: 600;
}

.feedback-section ul {
    list-style-type: none;
    padding-left: 0;
}

.feedback-section li {
    background: white;
    padding: 8px 12px;
    margin-bottom: 8px;
    border-radius: 4px;
    border-left: 4px solid #007bff;
}

/* ìˆ˜ë™ ê´€ê³„ ìƒì„± ê´€ë ¨ ìŠ¤íƒ€ì¼ */
.manual-relation-mode {
    background-color: #e3f2fd !important;
    border: 2px solid #2196f3 !important;
}

.relation-preview {
    background: #f8f9fa;
    border: 1px solid #dee2e6;
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 20px;
}

.node-preview {
    background: #2196f3;
    color: white;
    padding: 6px 12px;
    border-radius: 20px;
    font-weight: 500;
    margin: 0 10px;
}

.relation-arrow {
    font-size: 1.5em;
    color: #666;
    font-weight: bold;
}

/* ê´€ê³„ ì¶”ì¶œ ì»¨í…ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
.relation-context-section {
    background: #f8f9fa;
    border: 1px solid #dee2e6;
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 20px;
}

.context-container {
    width: 100%;
}

.context-description {
    color: #666;
    font-size: 0.95em;
    margin-bottom: 15px;
    padding: 10px;
    background: #fff;
    border-radius: 6px;
    border-left: 4px solid #007bff;
}

.context-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-bottom: 15px;
}

.context-item {
    display: flex;
    flex-direction: column;
    gap: 5px;
}

.context-item.full-width {
    grid-column: 1 / -1;
}

.context-item label {
    font-weight: 600;
    color: #333;
    margin-bottom: 5px;
}

.context-item .form-text {
    color: #666;
    font-size: 0.85em;
    margin-top: 3px;
}

.confidence-display {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 5px;
    font-size: 0.85em;
}

.confidence-display #confidence-value {
    font-weight: bold;
    color: #007bff;
}

.manual-relation-controls {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 1000;
    background: white;
    border: 1px solid #dee2e6;
    border-radius: 8px;
    padding: 15px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    min-width: 250px;
}

.manual-relation-controls h6 {
    margin-bottom: 10px;
    font-weight: 600;
}

.selected-nodes {
    margin: 10px 0;
}

.selected-node {
    display: inline-block;
    background: #e3f2fd;
    color: #1976d2;
    padding: 4px 8px;
    border-radius: 4px;
    margin: 2px;
    font-size: 0.9em;
}

.manual-relation-instructions {
    font-size: 0.85em;
    color: #666;
    margin-bottom: 10px;
}

@media (max-width: 768px) {
    .settings-grid {
        grid-template-columns: 1fr;
    }
    
    .stats-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .validation-score {
        flex-direction: column;
        text-align: center;
    }
    
    .manual-relation-controls {
        position: fixed;
        top: 10px;
        right: 10px;
        min-width: 200px;
    }
}
</style>

<!-- ìˆ˜ë™ ê´€ê³„ ìƒì„± ëª¨ë‹¬ -->
<div class="modal fade" id="manualRelationModal" tabindex="-1" role="dialog" aria-labelledby="manualRelationModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="manualRelationModalLabel">ğŸ”— ìˆ˜ë™ ê´€ê³„ ìƒì„±</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- ë…¸ë“œ ì„ íƒ ì„¹ì…˜ -->
                <div class="node-selection-section" id="nodeSelectionSection">
                    <h6 class="mb-3">1ï¸âƒ£ ë…¸ë“œ ì„ íƒ</h6>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="sourceNodeSelect" class="form-label">ì‹œì‘ ë…¸ë“œ *</label>
                            <select class="form-select" id="sourceNodeSelect" required>
                                <option value="">ì‹œì‘ ë…¸ë“œë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="targetNodeSelect" class="form-label">ëŒ€ìƒ ë…¸ë“œ *</label>
                            <select class="form-select" id="targetNodeSelect" required>
                                <option value="">ëŒ€ìƒ ë…¸ë“œë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <!-- ê´€ê³„ ë¯¸ë¦¬ë³´ê¸° -->
                <div class="relation-preview" id="relationPreview" style="display: none;">
                    <h6 class="mb-3">2ï¸âƒ£ ê´€ê³„ ì •ë³´</h6>
                    <div class="d-flex align-items-center justify-content-center mb-3">
                        <span class="node-preview" id="sourceNodePreview">ì‹œì‘ ë…¸ë“œ</span>
                        <span class="relation-arrow">â†’</span>
                        <span class="node-preview" id="targetNodePreview">ëŒ€ìƒ ë…¸ë“œ</span>
                    </div>
                </div>
                
                <form id="manualRelationForm">
                    <div class="mb-3">
                        <label for="relationLabel" class="form-label">ê´€ê³„ ë¼ë²¨ *</label>
                        <input type="text" class="form-control" id="relationLabel" placeholder="ì˜ˆ: í¬í•¨í•˜ë‹¤, ì‚¬ìš©í•˜ë‹¤, ê´€ë ¨ìˆë‹¤" required>
                        <div class="form-text">ë‘ ì—”í‹°í‹° ê°„ì˜ ê´€ê³„ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë¼ë²¨ì„ ì…ë ¥í•˜ì„¸ìš”</div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="relationDescription" class="form-label">ê´€ê³„ ì„¤ëª… (ì„ íƒì‚¬í•­)</label>
                        <textarea class="form-control" id="relationDescription" rows="3" placeholder="ì´ ê´€ê³„ì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
                    </div>
                    
                    <div class="mb-3">
                        <label for="relationConfidence" class="form-label">ì‹ ë¢°ë„</label>
                        <input type="range" class="form-range" id="relationConfidence" min="0.1" max="1.0" step="0.1" value="0.9">
                        <div class="d-flex justify-content-between">
                            <small>ë‚®ìŒ (0.1)</small>
                            <small id="confidenceValue">0.9</small>
                            <small>ë†’ìŒ (1.0)</small>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="relationDirection" class="form-label">ê´€ê³„ ë°©í–¥</label>
                        <select class="form-select" id="relationDirection">
                            <option value="directed">ë°©í–¥ì„± (A â†’ B)</option>
                            <option value="undirected">ë¬´ë°©í–¥ì„± (A â†” B)</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ì·¨ì†Œ</button>
                <button type="button" class="btn btn-primary" id="createRelationBtn">ê´€ê³„ ìƒì„±</button>
            </div>
        </div>
    </div>
</div>